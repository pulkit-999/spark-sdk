<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Customizing the SDK - Breez SDK - Nodeless (Spark)</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../styles.css">
        <link rel="stylesheet" href="../theme/pagetoc.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Breez SDK - Nodeless (Spark)</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/breez/spark-sdk" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/breez/spark-sdk/edit/main/crates/breez-sdk/docs/src/guide/customizing.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="customizing-the-sdk"><a class="header" href="#customizing-the-sdk">Customizing the SDK</a></h1>
<p>Using the SDK Builder gives you more control over the initialization and modular components used when the SDK is running. Below you can find examples of initializing the SDK using the SDK Builder and implementing modular components:</p>
<ul>
<li><a href="#with-storage">Storage</a> and <a href="#with-real-time-storage">Real-Time Storage</a> to manage stored data</li>
<li><a href="#with-chain-service">Bitcoin Chain Service</a> to provide network data</li>
<li><a href="#with-lnurl-client">LNURL Client</a> to make REST requests</li>
<li><a href="#with-fiat-service">Fiat Service</a> to provide Fiat currencies and exchange rates</li>
<li>Change the <a href="#with-key-set">Key Set</a> to alter the derivation path used</li>
<li><a href="#with-payment-observer">Payment Observer</a> to be notified before payments occur</li>
</ul>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">// Construct the seed using mnemonic words or entropy bytes
let mnemonic = "&lt;mnemonic words&gt;".to_string();
let seed = Seed::Mnemonic {
    mnemonic,
    passphrase: None,
};

// Create the default config
let mut config = default_config(Network::Mainnet);
config.api_key = Some("&lt;breez api key&gt;".to_string());

// Build the SDK using the config, seed and default storage
let builder = SdkBuilder::new(config, seed).with_default_storage("./.data".to_string());
// You can also pass your custom implementations:
// let builder = builder.with_storage(&lt;your storage implementation&gt;)
// let builder = builder.with_real_time_sync_storage(&lt;your real-time sync storage implementation&gt;)
// let builder = builder.with_chain_service(&lt;your chain service implementation&gt;)
// let builder = builder.with_rest_client(&lt;your rest client implementation&gt;)
// let builder = builder.with_key_set(KeySetConfig { key_set_type: &lt;your key set type&gt;, use_address_index: &lt;use address index&gt;, account_number: &lt;account number&gt; })
// let builder = builder.with_payment_observer(&lt;your payment observer implementation&gt;);
let sdk = builder.build().await?;</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">// Construct the seed using mnemonic words or entropy bytes
let mnemonic = "&lt;mnemonic words&gt;"
let seed = Seed.mnemonic(mnemonic: mnemonic, passphrase: nil)

// Create the default config
var config = defaultConfig(network: Network.mainnet)
config.apiKey = "&lt;breez api key&gt;"

// Build the SDK using the config, seed and default storage
let builder = SdkBuilder(config: config, seed: seed)
await builder.withDefaultStorage(storageDir: "./.data")
// You can also pass your custom implementations:
// await builder.withStorage(&lt;your storage implementation&gt;)
// await builder.withRealTimeSyncStorage(&lt;your real-time sync storage implementation&gt;)
// await builder.withChainService(&lt;your chain service implementation&gt;)
// await builder.withRestClient(&lt;your rest client implementation&gt;)
// await builder.withKeySet(&lt;your key set type&gt;, &lt;use address index&gt;, &lt;account number&gt;)
// await builder.withPaymentObserver(&lt;your payment observer implementation&gt;)
let sdk = try await builder.build()
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">// Construct the seed using mnemonic words or entropy bytes
val mnemonic = "&lt;mnemonic words&gt;"
val seed = Seed.Mnemonic(mnemonic, null)

// Create the default config
val config = defaultConfig(Network.MAINNET)
config.apiKey = "&lt;breez api key&gt;"

try {
    // Build the SDK using the config, seed and default storage
    val builder = SdkBuilder(config, seed)
    builder.withDefaultStorage("./.data")
    // You can also pass your custom implementations:
    // builder.withStorage(&lt;your storage implementation&gt;)
    // builder.withRealTimeSyncStorage(&lt;your real-time sync storage implementation&gt;)
    // builder.withChainService(&lt;your chain service implementation&gt;)
    // builder.withRestClient(&lt;your rest client implementation&gt;)
    // builder.withKeySet(&lt;your key set type&gt;, &lt;use address index&gt;, &lt;account number&gt;)
    // builder.withPaymentObserver(&lt;your payment observer implementation&gt;)
    val sdk = builder.build()
} catch (e: Exception) {
    // handle error
}
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-csharp ignore">// Construct the seed using mnemonic words or entropy bytes
var mnemonic = "&lt;mnemonic words&gt;";
var seed = new Seed.Mnemonic(mnemonic: mnemonic, passphrase: null);
// Create the default config
var config = BreezSdkSparkMethods.DefaultConfig(Network.Mainnet) with
{
    apiKey = "&lt;breez api key&gt;"
};
// Build the SDK using the config, seed and default storage
var builder = new SdkBuilder(config: config, seed: seed);
await builder.WithDefaultStorage(storageDir: "./.data");
// You can also pass your custom implementations:
// await builder.WithStorage(&lt;your storage implementation&gt;)
// await builder.WithRealTimeSyncStorage(&lt;your real-time sync storage implementation&gt;)
// await builder.WithChainService(&lt;your chain service implementation&gt;)
// await builder.WithRestClient(&lt;your rest client implementation&gt;)
// await builder.WithKeySet(&lt;your key set type&gt;, &lt;use address index&gt;, &lt;account number&gt;)
// await builder.WithPaymentObserver(&lt;your payment observer implementation&gt;);
var sdk = await builder.Build();
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript ignore">// Call init when using the SDK in a web environment before calling any other SDK
// methods. This is not needed when using the SDK in a Node.js/Deno environment.
await init()

// Construct the seed using mnemonic words or entropy bytes
const mnemonic = '&lt;mnemonic words&gt;'
const seed: Seed = { type: 'mnemonic', mnemonic, passphrase: undefined }

// Create the default config
const config = defaultConfig('mainnet')
config.apiKey = '&lt;breez api key&gt;'

// Build the SDK using the config, seed and default storage
let builder = SdkBuilder.new(config, seed)
builder = await builder.withDefaultStorage('./.data')
// You can also pass your custom implementations:
// builder = builder.withStorage(&lt;your storage implementation&gt;)
// builder = builder.withRealTimeSyncStorage(&lt;your real-time sync storage implementation&gt;)
// builder = builder.withChainService(&lt;your chain service implementation&gt;)
// builder = builder.withRestClient(&lt;your rest client implementation&gt;)
// builder = builder.withKeySet({ keySetType: &lt;your key set type&gt;, useAddressIndex: &lt;use address index&gt;, accountNumber: &lt;account number&gt; })
// builder = builder.withPaymentObserver(&lt;your payment observer implementation&gt;)
const sdk = await builder.build()
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript ignore">// Construct the seed using mnemonic words or entropy bytes
const mnemonic = '&lt;mnemonics words&gt;'
const seed = new Seed.Mnemonic({ mnemonic, passphrase: undefined })

// Create the default config
const config = defaultConfig(Network.Mainnet)
config.apiKey = '&lt;breez api key&gt;'

// Build the SDK using the config, seed and default storage
const builder = new SdkBuilder(config, seed)
await builder.withDefaultStorage(`${RNFS.DocumentDirectoryPath}/data`)
// You can also pass your custom implementations:
// await builder.withStorage(&lt;your storage implementation&gt;)
// await builder.withRealTimeSyncStorage(&lt;your real-time sync storage implementation&gt;)
// await builder.withChainService(&lt;your chain service implementation&gt;)
// await builder.withRestClient(&lt;your rest client implementation&gt;)
// await builder.withKeySet({ keySetType: &lt;your key set type&gt;, useAddressIndex: &lt;use address index&gt;, accountNumber: &lt;account number&gt; })
// await builder.withPaymentObserver(&lt;your payment observer implementation&gt;)
const sdk = await builder.build()
</code></pre>
</section>
<div slot="title">Flutter</div>
<section>
<pre><code class="language-dart ignore">// Construct the seed using mnemonic words or entropy bytes
String mnemonic = "&lt;mnemonic words&gt;";
final seed = Seed.mnemonic(mnemonic: mnemonic, passphrase: null);

// Create the default config
final config = defaultConfig(network: Network.mainnet)
    .copyWith(apiKey: "&lt;breez api key&gt;");

// Build the SDK using the config, seed and default storage
final builder = SdkBuilder(config: config, seed: seed);
builder.withDefaultStorage(storageDir: "./.data");
// You can also pass your custom implementations:
// builder.withRestChainService(
//     url: "https://custom.chain.service",
//     credentials: Credentials(
//         username: "service-username", password: "service-password"));
// builder.withKeySet(config: KeySetConfig(keySetType: &lt;your key set type&gt;, useAddressIndex: &lt;use address index&gt;, accountNumber: &lt;account number&gt;));
final sdk = await builder.build();
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore"># Construct the seed using mnemonic words or entropy bytes
mnemonic = "&lt;mnemonic words&gt;"
seed = Seed.MNEMONIC(mnemonic=mnemonic, passphrase=None)
# Create the default config
config = default_config(network=Network.MAINNET)
config.api_key = "&lt;breez api key&gt;"
try:
    # Build the SDK using the config, seed and default storage
    builder = SdkBuilder(config=config, seed=seed)
    await builder.with_default_storage(storage_dir="./.data")
    # You can also pass your custom implementations:
    # await builder.with_storage(&lt;your storage implementation&gt;)
    # await builder.with_real_time_sync_storage(&lt;your real-time sync storage implementation&gt;)
    # await builder.with_chain_service(&lt;your chain service implementation&gt;)
    # await builder.with_rest_client(&lt;your rest client implementation&gt;)
    # await builder.with_key_set(&lt;your key set type&gt;, &lt;use address index&gt;, &lt;account number&gt;)
    # await builder.with_payment_observer(&lt;your payment observer implementation&gt;)
    sdk = await builder.build()
    return sdk
except Exception as error:
    logging.error(error)
    raise
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">// Construct the seed using mnemonic words or entropy bytes
mnemonic := "&lt;mnemonic words&gt;"
var seed breez_sdk_spark.Seed = breez_sdk_spark.SeedMnemonic{
	Mnemonic:   mnemonic,
	Passphrase: nil,
}

// Create the default config
apiKey := "&lt;breez api key&gt;"
config := breez_sdk_spark.DefaultConfig(breez_sdk_spark.NetworkMainnet)
config.ApiKey = &amp;apiKey

// Build the SDK using the config, seed and default storage
builder := breez_sdk_spark.NewSdkBuilder(config, seed)
builder.WithDefaultStorage("./.data")
// You can also pass your custom implementations:
// builder.WithStorage(&lt;your storage implementation&gt;)
// builder.WithRealTimeSyncStorage(&lt;your real-time sync storage implementation&gt;)
// builder.WithChainService(&lt;your chain service implementation&gt;)
// builder.WithRestClient(&lt;your rest client implementation&gt;)
// builder.WithKeySet(&lt;your key set type&gt;, &lt;use address index&gt;, &lt;account number&gt;)
// builder.WithPaymentObserver(&lt;your payment observer implementation&gt;)
sdk, err := builder.Build()

return sdk, err
</code></pre>
</section>
</custom-tabs>
<h2 id="with-storage">
    <a class="header" href="#with-storage">With Storage</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_storage">API docs</a>
</h2>
<p>When using the SDK Builder, you either have to provide a Storage implementation or use the default storage from the SDK.</p>
<p><strong>Note:</strong> Flutter currently only supports using the default storage.</p>
<h2 id="with-real-time-storage">
    <a class="header" href="#with-real-time-storage">With Real-Time Sync Storage</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_real_time_sync_storage">API docs</a>
</h2>
<p>If you are providing your own Storage implementation, you also need to provide a Real-Time Sync Storage implementation when real-time sync is enabled. When using the default storage from the SDK, this is already provided.</p>
<p><strong>Note:</strong> Flutter currently only supports using the default storage.</p>
<h2 id="with-chain-service">
    <a class="header" href="#with-chain-service">With Chain Service</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_chain_service">API docs</a>
</h2>
<p>The SDK provides a default Bitcoin Chain Service implementation. If you want to use your own, you can provide it either by using <a href="#with-rest-chain-service">With REST Chain Service</a> or by implementing the Bitcoin Chain Service interface.</p>
<h2 id="with-rest-chain-service">
    <a class="header" href="#with-rest-chain-service">With REST Chain Service</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_rest_chain_service">API docs</a>
</h2>
<p>The SDK provides a default Bitcoin Chain Service implementation. If you want to use your own, you can provide it either by using <a href="#with-chain-service">With Chain Service</a> or by providing a URL and optional credentials.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">let url = "&lt;your REST chain service URL&gt;".to_string();
let chain_api_type = ChainApiType::MempoolSpace;
let optional_credentials = Credentials {
    username: "&lt;username&gt;".to_string(),
    password: "&lt;password&gt;".to_string(),
};
builder.with_rest_chain_service(
    url,
    chain_api_type,
    Some(optional_credentials),
)</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">let url = "&lt;your REST chain service URL&gt;"
let chainApiType = ChainApiType.mempoolSpace
let optionalCredentials = Credentials(
    username: "&lt;username&gt;",
    password: "&lt;password&gt;"
)
await builder.withRestChainService(
    url: url,
    apiType: chainApiType,
    credentials: optionalCredentials
)
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">val url = "&lt;your REST chain service URL&gt;"
val chainApiType = ChainApiType.MEMPOOL_SPACE
val optionalCredentials = Credentials(
    username = "&lt;username&gt;",
    password = "&lt;password&gt;"
)
builder.withRestChainService(
    url = url,
    apiType = chainApiType,
    credentials = optionalCredentials
)
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-csharp ignore">var url = "&lt;your REST chain service URL&gt;";
var chainApiType = ChainApiType.MempoolSpace;
var optionalCredentials = new Credentials(
    username: "&lt;username&gt;",
    password: "&lt;password&gt;"
);
await builder.WithRestChainService(
    url: url,
    apiType: chainApiType,
    credentials: optionalCredentials
);
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript ignore">const url = '&lt;your REST chain service URL&gt;'
const chainApiType = 'mempoolSpace'
const optionalCredentials: Credentials = {
  username: '&lt;username&gt;',
  password: '&lt;password&gt;'
}
builder = builder.withRestChainService(url, chainApiType, optionalCredentials)
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript ignore">const url = '&lt;your REST chain service URL&gt;'
const chainApiType = ChainApiType.MempoolSpace
const optionalCredentials: Credentials = {
  username: '&lt;username&gt;',
  password: '&lt;password&gt;'
}
await builder.withRestChainService(url, chainApiType, optionalCredentials)
</code></pre>
</section>
<div slot="title">Flutter</div>
<section>
<pre><code class="language-dart ignore">String url = "&lt;your REST chain service URL&gt;";
var chainApiType = ChainApiType.mempoolSpace;
var optionalCredentials = Credentials(
  username: "&lt;username&gt;",
  password: "&lt;password&gt;",
);
builder.withRestChainService(
  url: url,
  apiType: chainApiType,
  credentials: optionalCredentials,
);
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">url = "&lt;your REST chain service URL&gt;"
chain_api_type = ChainApiType.MEMPOOL_SPACE
optional_credentials = Credentials(
    username="&lt;username&gt;",
    password="&lt;password&gt;",
)
await builder.with_rest_chain_service(
    url=url,
    api_type=chain_api_type,
    credentials=optional_credentials,
)
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">url := "&lt;your REST chain service URL&gt;"
chainApiType := breez_sdk_spark.ChainApiTypeMempoolSpace
optionalCredentials := &amp;breez_sdk_spark.Credentials{
	Username: "&lt;username&gt;",
	Password: "&lt;password&gt;",
}
builder.WithRestChainService(url, chainApiType, optionalCredentials)
</code></pre>
</section>
</custom-tabs>
<h2 id="with-fiat-service">
    <a class="header" href="#with-fiat-service">With Fiat Service</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_fiat_service">API docs</a>
</h2>
<p>The SDK by default provides a list of available Fiat currencies and current exchange rates. If you want to use your own, you can provide it by implementing the Fiat Service interface.</p>
<h2 id="with-lnurl-client">
    <a class="header" href="#with-lnurl-client">With LNURL Client</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_lnurl_client">API docs</a>
</h2>
<p>The LNURL Client is used to make REST requests specifically when interacting with LNURL. If you want to use your own, you can it provide by implementing the REST Service interface.</p>
<h2 id="with-key-set">
    <a class="header" href="#with-key-set">With Key Set</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_key_set">API docs</a>
</h2>
<p>The SDK uses by default the Default key set with the account number 1 on Mainnet (0 on Regtest). You can change this to alter the derivation path used with the provided seed:</p>
<ul>
<li><strong>Default</strong> - Uses derivation path <code>m/8797555'/&lt;account number&gt;</code> (use address index is ignored)</li>
<li><strong>Taproot</strong> - Uses derivation path <code>m/86'/0'/&lt;account number&gt;'/0/0</code><br/>(or <code>m/86'/0'/0'/0/&lt;account number&gt;</code> when use address index is enabled)</li>
<li><strong>Native Segwit</strong> - Uses derivation path <code>m/84'/0'/&lt;account number&gt;'/0/0</code><br/>(or <code>m/84'/0'/0'/0/&lt;account number&gt;</code> when use address index is enabled)</li>
<li><strong>Wrapped Segwit</strong> - Uses derivation path <code>m/49'/0'/&lt;account number&gt;'/0/0</code><br/>(or <code>m/49'/0'/0'/0/&lt;account number&gt;</code> when use address index is enabled)</li>
<li><strong>Legacy</strong> - Uses derivation path <code>m/44'/0'/&lt;account number&gt;'/0/0</code><br/>(or <code>m/44'/0'/0'/0/&lt;account number&gt;</code> when use address index is enabled)</li>
</ul>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">let key_set_type = KeySetType::Default;
let use_address_index = false;
let optional_account_number = 21;
builder.with_key_set(KeySetConfig {
    key_set_type,
    use_address_index,
    account_number: Some(optional_account_number),
})</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">let keySetType = KeySetType.default
let useAddressIndex = false
let optionalAccountNumber = UInt32(21)

let config = KeySetConfig(
    keySetType: keySetType,
    useAddressIndex: useAddressIndex,
    accountNumber: optionalAccountNumber
)

await builder.withKeySet(config: config)
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">val keySetType = KeySetType.DEFAULT
val useAddressIndex = false
val optionalAccountNumber = 21u

val keySetConfig = KeySetConfig(
    keySetType = keySetType,
    useAddressIndex = useAddressIndex,
    accountNumber = optionalAccountNumber
)

builder.withKeySet(keySetConfig)
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-csharp ignore">var keySetType = KeySetType.Default;
var useAddressIndex = false;
var optionalAccountNumber = 21u;

var keySetConfig = new KeySetConfig(
    keySetType: keySetType,
    useAddressIndex: useAddressIndex,
    accountNumber: optionalAccountNumber
);

await builder.WithKeySet(keySetConfig);
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript ignore">builder = builder.withKeySet({
  keySetType: 'default',
  useAddressIndex: false,
  accountNumber: 21
})
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript ignore">const keySetConfig: KeySetConfig = {
  keySetType: KeySetType.Default,
  useAddressIndex: false,
  accountNumber: 21
}
await builder.withKeySet(keySetConfig)
</code></pre>
</section>
<div slot="title">Flutter</div>
<section>
<pre><code class="language-dart ignore">var keySetType = KeySetType.default_;
var useAddressIndex = false;
var optionalAccountNumber = 21;
builder.withKeySet(
  config: KeySetConfig(
    keySetType: keySetType,
    useAddressIndex: useAddressIndex,
    accountNumber: optionalAccountNumber,
  ),
);
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">key_set_type = KeySetType.DEFAULT
use_address_index = False
optional_account_number = 21

key_set_config = KeySetConfig(
    key_set_type=key_set_type,
    use_address_index=use_address_index,
    account_number=optional_account_number,
)

await builder.with_key_set(config=key_set_config)
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">keySetType := breez_sdk_spark.KeySetTypeDefault
useAccountIndex := true
optionalAccountNumber := uint32(21)

keySetConfig := breez_sdk_spark.KeySetConfig{
	KeySetType:      keySetType,
	UseAddressIndex: useAccountIndex,
	AccountNumber:   &amp;optionalAccountNumber,
}

builder.WithKeySet(keySetConfig)
</code></pre>
</section>
</custom-tabs>
<h2 id="with-payment-observer">
    <a class="header" href="#with-payment-observer">With Payment Observer</a>
    <a class="tag" target="_blank" href="https://breez.github.io/spark-sdk/breez_sdk_spark/struct.SdkBuilder.html#method.with_payment_observer">API docs</a>
</h2>
<p>By implementing the Payment Observer interface you can be notified before a payment is sent. It includes information about the provisional payment including the payment ID, amount to be sent (in satoshis or token base units) and payment details based on the payment method.</p>
<p><strong>Note:</strong> Flutter currently does not support this.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">pub(crate) struct ExamplePaymentObserver {}

#[async_trait]
impl PaymentObserver for ExamplePaymentObserver {
    async fn before_send(
        &amp;self,
        payments: Vec&lt;ProvisionalPayment&gt;,
    ) -&gt; Result&lt;(), PaymentObserverError&gt; {
        for payment in payments {
            info!(
                "About to send payment: {:?} of amount {:?}",
                payment.payment_id, payment.amount
            );
        }
        Ok(())
    }
}

pub(crate) fn with_payment_observer(builder: SdkBuilder) -&gt; SdkBuilder {
    let observer = ExamplePaymentObserver {};
    builder.with_payment_observer(Arc::new(observer))
}</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">class ExamplePaymentObserver: PaymentObserver {
    func beforeSend(payments: [ProvisionalPayment]) async {
        for payment in payments {
            print("About to send payment: \(payment.paymentId) of amount \(payment.amount)")
        }
    }
}

func withPaymentObserver(builder: SdkBuilder) async {
    let paymentObserver = ExamplePaymentObserver()
    await builder.withPaymentObserver(paymentObserver: paymentObserver)
}
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">class ExamplePaymentObserver : PaymentObserver {
    override suspend fun beforeSend(payments: List&lt;ProvisionalPayment&gt;) {
        for (payment in payments) {
            // Log.v("PaymentObserver", "About to send payment: ${payment.paymentId} of amount ${payment.amount}")
        }
    }
}

suspend fun withPaymentObserver(builder: SdkBuilder) {
    val paymentObserver = ExamplePaymentObserver()
    builder.withPaymentObserver(paymentObserver)
}
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-csharp ignore">class ExamplePaymentObserver : PaymentObserver
{
    public async Task BeforeSend(List&lt;ProvisionalPayment&gt; payments)
    {
        foreach (var payment in payments)
        {
            Console.WriteLine($"About to send payment {payment.paymentId} of amount {payment.amount}");
        }
    }
}

async Task WithPaymentObserver(SdkBuilder builder)
{
    var paymentObserver = new ExamplePaymentObserver();
    await builder.WithPaymentObserver(paymentObserver);
}
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript ignore">class ExamplePaymentObserver {
  beforeSend = async (payments: ProvisionalPayment[]) =&gt; {
    for (const payment of payments) {
      console.log(`About to send payment: ${payment.paymentId} of amount ${payment.amount}`)
    }
  }
}

const exampleWithPaymentObserver = (builder: SdkBuilder): SdkBuilder =&gt; {
  const paymentObserver = new ExamplePaymentObserver()
  return builder.withPaymentObserver(paymentObserver)
}
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript ignore">class ExamplePaymentObserver {
  beforeSend = async (payments: ProvisionalPayment[]) =&gt; {
    for (const payment of payments) {
      console.log(`About to send payment: ${payment.paymentId} of amount ${payment.amount}`)
    }
  }
}

const exampleWithPaymentObserver = async (builder: SdkBuilder) =&gt; {
  const paymentObserver = new ExamplePaymentObserver()
  await builder.withPaymentObserver(paymentObserver)
}
</code></pre>
</section>
<div slot="title">Flutter</div>
<section>
<pre><code class="language-dart ignore">
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">class ExamplePaymentObserver(PaymentObserver):
    def before_send(self, payments: typing.List[ProvisionalPayment]):
        for payment in payments:
            logging.debug(f"About to send payment {payment.payment_id} of amount {payment.amount}")


async def with_payment_observer(builder: SdkBuilder):
    payment_observer = ExamplePaymentObserver()
    await builder.with_payment_observer(payment_observer=payment_observer)
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">type ExamplePaymentObserver struct{}

func (ExamplePaymentObserver) BeforeSend(payments []breez_sdk_spark.ProvisionalPayment) error {
	for _, payment := range payments {
		log.Printf("About to send payment: %v of amount %v", payment.PaymentId, payment.Amount)
	}
	return nil
}

func WithPaymentObserver(builder *breez_sdk_spark.SdkBuilder) {
	observer := ExamplePaymentObserver{}
	builder.WithPaymentObserver(observer)
}
</code></pre>
</section>
</custom-tabs>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../guide/initializing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../guide/get_info.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../guide/initializing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../guide/get_info.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../tabs.js"></script>
        <script src="../theme/pagetoc.js"></script>



    </div>
    </body>
</html>
